<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETH & SOL vs BTC Analysis</title>
    <meta http-equiv="refresh" content="300">
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #0a0a0a;
            --border: #1a1a1a;
            --text-primary: #e5e5e5;
            --text-secondary: #999;
            --text-tertiary: #666;
            --accent: #fff;
            --positive: #4a7c59;
            --negative: #7c4a4a;
            --neutral: #7c7c4a;
            --eth-color: #627eea;
            --sol-color: #9945ff;
            --btc-color: #f7931a;
        }

        [data-theme="day"] {
            --bg-primary: #fafafa;
            --bg-secondary: #fff;
            --border: #e5e5e5;
            --text-primary: #1a1a1a;
            --text-secondary: #666;
            --text-tertiary: #999;
            --accent: #000;
            --positive: #16a34a;
            --negative: #dc2626;
            --neutral: #ea580c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 40px 20px;
            line-height: 1.6;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        .nav {
            display: flex;
            gap: 8px;
            padding: 12px 20px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            margin: -40px -20px 40px -20px;
            flex-wrap: wrap;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.85em;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: var(--bg-primary);
            border-color: var(--border);
        }

        .nav-link.active {
            color: var(--text-primary);
            background: var(--bg-primary);
            border-color: var(--border);
            font-weight: 500;
        }

        .header {
            margin-bottom: 60px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .header-content { flex: 1; }
        .controls { display: flex; gap: 10px; }

        .theme-toggle, .refresh-btn {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .theme-toggle:hover, .refresh-btn:hover {
            color: var(--text-primary);
            border-color: var(--text-tertiary);
        }

        h1 {
            font-size: 2.5em;
            font-weight: 300;
            margin-bottom: 10px;
            letter-spacing: -0.02em;
        }

        .subtitle { color: var(--text-tertiary); font-size: 0.95em; }
        .meta { color: var(--text-tertiary); font-size: 0.9em; margin-top: 10px; }

        .section { margin: 60px 0; }

        .section-title {
            font-size: 1.5em;
            font-weight: 300;
            margin-bottom: 30px;
            letter-spacing: -0.01em;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1px;
            background: var(--border);
            margin-bottom: 1px;
        }

        .card {
            background: var(--bg-secondary);
            padding: 30px;
            transition: background 0.3s ease;
        }

        .card-title {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-tertiary);
            margin-bottom: 20px;
            font-weight: 500;
        }

        .card-timestamp {
            font-size: 0.7em;
            color: var(--text-tertiary);
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid var(--border);
            text-align: right;
        }

        .price-large {
            font-size: 2em;
            font-weight: 200;
            margin-bottom: 10px;
            font-variant-numeric: tabular-nums;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .metric-row:last-child { border-bottom: none; }
        .metric-label { color: var(--text-secondary); font-size: 0.9em; }
        .metric-value { font-variant-numeric: tabular-nums; color: var(--text-primary); }

        .positive { color: var(--positive); }
        .negative { color: var(--negative); }
        .neutral { color: var(--neutral); }
        .eth-color { color: var(--eth-color); }
        .sol-color { color: var(--sol-color); }
        .btc-color { color: var(--btc-color); }

        .outperform-banner {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            padding: 30px;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .outperform-banner.eth-leading { border-left: 3px solid var(--eth-color); }
        .outperform-banner.sol-leading { border-left: 3px solid var(--sol-color); }
        .outperform-banner.btc-leading { border-left: 3px solid var(--btc-color); }

        .outperform-icon { font-size: 2.5em; opacity: 0.8; }
        .outperform-content { flex: 1; }
        .outperform-title { font-size: 1.2em; font-weight: 400; margin-bottom: 5px; }
        .outperform-description { color: var(--text-secondary); font-size: 0.9em; }
        .outperform-meter { text-align: right; }
        .outperform-meter-value { font-size: 2em; font-weight: 200; }
        .outperform-meter-label { font-size: 0.75em; color: var(--text-tertiary); text-transform: uppercase; letter-spacing: 0.1em; }

        .ratio-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1px;
            background: var(--border);
            border: 1px solid var(--border);
        }

        .ratio-card {
            background: var(--bg-secondary);
            padding: 30px;
            text-align: center;
        }

        .ratio-value { font-size: 2.5em; font-weight: 200; margin-bottom: 10px; }
        .ratio-pair { font-size: 0.85em; color: var(--text-tertiary); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 15px; }
        .ratio-change { font-size: 0.9em; margin-bottom: 10px; }
        .ratio-signal { font-size: 0.85em; padding: 5px 12px; border-radius: 3px; display: inline-block; }

        .signals-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1px;
            background: var(--border);
            border: 1px solid var(--border);
        }

        .signal-section { background: var(--bg-secondary); padding: 30px; }

        .signal-title {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-tertiary);
            margin-bottom: 20px;
            font-weight: 500;
        }

        .signal-list { list-style: none; }
        .signal-list li { padding: 8px 0; color: var(--text-secondary); font-size: 0.9em; }
        .signal-list li:before { content: "â€”"; margin-right: 10px; color: var(--text-tertiary); }

        .chart-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            padding: 0;
            margin-bottom: 1px;
        }

        .summary {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            padding: 40px;
            text-align: center;
        }

        .summary-title { font-size: 1.2em; font-weight: 300; margin-bottom: 30px; }
        .summary-verdict { font-size: 1.5em; font-weight: 400; margin-bottom: 15px; }
        .summary-detail { color: var(--text-secondary); font-size: 0.95em; max-width: 600px; margin: 0 auto 30px; }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            padding-top: 30px;
            border-top: 1px solid var(--border);
        }

        .summary-item { padding: 15px; }
        .summary-label { font-size: 0.75em; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-tertiary); margin-bottom: 8px; }
        .summary-value { font-size: 1.1em; }

        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; }
            .ratio-grid { grid-template-columns: 1fr; }
            .signals-grid { grid-template-columns: 1fr; }
            .summary-grid { grid-template-columns: repeat(2, 1fr); }
            h1 { font-size: 2em; }
            .header { flex-direction: column; gap: 20px; }
            .controls { width: 100%; flex-direction: column; }
            .theme-toggle, .refresh-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <a href="index.html" class="nav-link">Bitcoin Analysis</a>
            <a href="alts-tracker.html" class="nav-link active">ETH & SOL vs BTC</a>
            <a href="metals-crypto-tracker.html" class="nav-link">Metals â†’ Crypto</a>
            <a href="dxy-tracker.html" class="nav-link">DXY vs Crypto</a>
            <a href="options-tracker.html" class="nav-link">Options Flow</a>
            <a href="summary.html" class="nav-link">AI Summary</a>
        </nav>

        <div class="header">
            <div class="header-content">
                <h1>ETH & SOL vs BTC</h1>
                <div class="subtitle">Alt-coin relative strength and rotation signals</div>
                <div class="meta" id="lastUpdate">Connecting to markets...</div>
            </div>
            <div class="controls">
                <button class="refresh-btn" onclick="location.reload()">Refresh</button>
                <button class="theme-toggle" onclick="toggleTheme()">Day Mode</button>
            </div>
        </div>

        <!-- Outperformance Banner -->
        <div class="outperform-banner btc-leading" id="outperformBanner">
            <div class="outperform-icon" id="outperformIcon">âŸ·</div>
            <div class="outperform-content">
                <div class="outperform-title" id="outperformTitle">Analyzing Relative Strength...</div>
                <div class="outperform-description" id="outperformDescription">Loading price data to determine alt performance</div>
            </div>
            <div class="outperform-meter">
                <div class="outperform-meter-value" id="outperformValue">--</div>
                <div class="outperform-meter-label">Leader</div>
            </div>
        </div>

        <!-- Price Cards -->
        <div class="grid">
            <div class="card">
                <div class="card-title">Bitcoin (BTC) - Benchmark</div>
                <div class="price-large btc-color" id="btcPrice">$--,---.--</div>
                <div class="metric-row">
                    <span class="metric-label">24h Change</span>
                    <span class="metric-value" id="btcChange24h">â€”</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">7d Change</span>
                    <span class="metric-value" id="btcChange7d">â€”</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Dominance Trend</span>
                    <span class="metric-value" id="btcDominance">â€”</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Funding Rate</span>
                    <span class="metric-value" id="btcFunding">â€”</span>
                </div>
                <div class="card-timestamp" id="tsBtc">â€”</div>
            </div>

            <div class="card">
                <div class="card-title">Ethereum (ETH)</div>
                <div class="price-large eth-color" id="ethPrice">$--,---.--</div>
                <div class="metric-row">
                    <span class="metric-label">24h Change</span>
                    <span class="metric-value" id="ethChange24h">â€”</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">vs BTC (24h)</span>
                    <span class="metric-value" id="ethVsBtc">â€”</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">ETH/BTC Ratio</span>
                    <span class="metric-value" id="ethBtcRatio">â€”</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Funding Rate</span>
                    <span class="metric-value" id="ethFunding">â€”</span>
                </div>
                <div class="card-timestamp" id="tsEth">â€”</div>
            </div>

            <div class="card">
                <div class="card-title">Solana (SOL)</div>
                <div class="price-large sol-color" id="solPrice">$---.--</div>
                <div class="metric-row">
                    <span class="metric-label">24h Change</span>
                    <span class="metric-value" id="solChange24h">â€”</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">vs BTC (24h)</span>
                    <span class="metric-value" id="solVsBtc">â€”</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">SOL/BTC Ratio</span>
                    <span class="metric-value" id="solBtcRatio">â€”</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Funding Rate</span>
                    <span class="metric-value" id="solFunding">â€”</span>
                </div>
                <div class="card-timestamp" id="tsSol">â€”</div>
            </div>
        </div>

        <!-- Ratio Analysis -->
        <div class="section">
            <div class="section-title">Ratio Analysis</div>
            <div class="ratio-grid">
                <div class="ratio-card">
                    <div class="ratio-pair">ETH/BTC Ratio</div>
                    <div class="ratio-value" id="ethBtcRatioLarge">0.000</div>
                    <div class="ratio-change" id="ethBtcRatioChange">Calculating...</div>
                    <div class="ratio-signal" id="ethBtcSignal">â€”</div>
                </div>
                <div class="ratio-card">
                    <div class="ratio-pair">SOL/BTC Ratio</div>
                    <div class="ratio-value" id="solBtcRatioLarge">0.00000</div>
                    <div class="ratio-change" id="solBtcRatioChange">Calculating...</div>
                    <div class="ratio-signal" id="solBtcSignal">â€”</div>
                </div>
            </div>
        </div>

        <!-- Detailed Metrics -->
        <div class="section">
            <div class="section-title">Performance Metrics</div>
            <div class="grid">
                <div class="card">
                    <div class="card-title">ETH Deep Dive</div>
                    <div class="metric-row">
                        <span class="metric-label">24h Volume</span>
                        <span class="metric-value" id="ethVolume">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Open Interest</span>
                        <span class="metric-value" id="ethOI">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Long/Short Ratio</span>
                        <span class="metric-value" id="ethLSRatio">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Volatility vs BTC</span>
                        <span class="metric-value" id="ethVolatility">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Momentum Score</span>
                        <span class="metric-value" id="ethMomentum">â€”</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">SOL Deep Dive</div>
                    <div class="metric-row">
                        <span class="metric-label">24h Volume</span>
                        <span class="metric-value" id="solVolume">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Open Interest</span>
                        <span class="metric-value" id="solOI">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Long/Short Ratio</span>
                        <span class="metric-value" id="solLSRatio">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Volatility vs BTC</span>
                        <span class="metric-value" id="solVolatility">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Momentum Score</span>
                        <span class="metric-value" id="solMomentum">â€”</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">Rotation Signals</div>
                    <div class="metric-row">
                        <span class="metric-label">Alt Season Index</span>
                        <span class="metric-value" id="altSeasonIndex">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">BTC Dominance</span>
                        <span class="metric-value" id="btcDomValue">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Risk Appetite</span>
                        <span class="metric-value" id="riskAppetite">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Rotation Phase</span>
                        <span class="metric-value" id="rotationPhase">â€”</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Recommended Focus</span>
                        <span class="metric-value" id="recommendedFocus">â€”</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Signals -->
        <div class="section">
            <div class="section-title">Trading Signals</div>
            <div class="signals-grid">
                <div class="signal-section">
                    <div class="signal-title">Bullish Alts (Outperform BTC)</div>
                    <ul class="signal-list" id="bullishSignals">
                        <li>Loading signals...</li>
                    </ul>
                </div>
                <div class="signal-section">
                    <div class="signal-title">Bullish BTC (Alts Underperform)</div>
                    <ul class="signal-list" id="bearishSignals">
                        <li>Loading signals...</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Chart -->
        <div class="section">
            <div class="section-title">ETH/BTC & SOL/BTC Chart</div>
            <div class="chart-container">
                <div id="tradingview_chart" style="height: 500px;"></div>
            </div>
        </div>

        <!-- Summary -->
        <div class="section">
            <div class="summary">
                <div class="summary-title">Alt Performance Assessment</div>
                <div class="summary-verdict" id="summaryVerdict">Analyzing...</div>
                <div class="summary-detail" id="summaryDetail">Loading market data...</div>
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-label">ETH Outlook</div>
                        <div class="summary-value" id="ethOutlook">â€”</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">SOL Outlook</div>
                        <div class="summary-value" id="solOutlook">â€”</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Best Play</div>
                        <div class="summary-value" id="bestPlay">â€”</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Conviction</div>
                        <div class="summary-value" id="conviction">â€”</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://s3.tradingview.com/tv.js"></script>
    <script>
        let currentTheme = localStorage.getItem('dashboard-theme') || 'night';

        let marketData = {
            btc: { price: 0, change24h: 0, funding: 0, volume: 0, high24h: 0, low24h: 0 },
            eth: { price: 0, change24h: 0, funding: 0, volume: 0, oi: 0, lsRatio: 1, high24h: 0, low24h: 0 },
            sol: { price: 0, change24h: 0, funding: 0, volume: 0, oi: 0, lsRatio: 1, high24h: 0, low24h: 0 }
        };

        function formatPrice(price, decimals = 2) {
            return '$' + parseFloat(price).toLocaleString('en-US', {
                minimumFractionDigits: decimals,
                maximumFractionDigits: decimals
            });
        }

        function formatLargeNumber(num) {
            if (num >= 1e9) return '$' + (num / 1e9).toFixed(2) + 'B';
            if (num >= 1e6) return '$' + (num / 1e6).toFixed(2) + 'M';
            return '$' + num.toFixed(0);
        }

        function formatPercent(value) {
            const sign = value >= 0 ? '+' : '';
            return sign + value.toFixed(2) + '%';
        }

        function getChangeClass(value) {
            if (value > 0.5) return 'positive';
            if (value < -0.5) return 'negative';
            return 'neutral';
        }

        function formatTimestamp() {
            return new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
        }

        function updateTimestamp(id) {
            const el = document.getElementById(id);
            if (el) el.textContent = 'Updated: ' + formatTimestamp();
        }

        function toggleTheme() {
            const html = document.documentElement;
            const button = document.querySelector('.theme-toggle');
            if (currentTheme === 'day') {
                html.removeAttribute('data-theme');
                button.textContent = 'Day Mode';
                currentTheme = 'night';
            } else {
                html.setAttribute('data-theme', 'day');
                button.textContent = 'Night Mode';
                currentTheme = 'day';
            }
            localStorage.setItem('dashboard-theme', currentTheme);
            initChart();
        }

        async function fetchBtcData() {
            try {
                const [tickerRes, fundingRes] = await Promise.all([
                    fetch('https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=BTCUSDT'),
                    fetch('https://fapi.binance.com/fapi/v1/fundingRate?symbol=BTCUSDT&limit=1')
                ]);
                const ticker = await tickerRes.json();
                const funding = await fundingRes.json();

                marketData.btc.price = parseFloat(ticker.lastPrice);
                marketData.btc.change24h = parseFloat(ticker.priceChangePercent);
                marketData.btc.volume = parseFloat(ticker.quoteVolume);
                marketData.btc.high24h = parseFloat(ticker.highPrice);
                marketData.btc.low24h = parseFloat(ticker.lowPrice);
                marketData.btc.funding = funding[0] ? parseFloat(funding[0].fundingRate) * 100 : 0;

                updateBtcUI();
                updateTimestamp('tsBtc');
            } catch (e) { console.error('BTC fetch error:', e); }
        }

        async function fetchEthData() {
            try {
                const [tickerRes, fundingRes, oiRes, lsRes] = await Promise.all([
                    fetch('https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=ETHUSDT'),
                    fetch('https://fapi.binance.com/fapi/v1/fundingRate?symbol=ETHUSDT&limit=1'),
                    fetch('https://fapi.binance.com/fapi/v1/openInterest?symbol=ETHUSDT'),
                    fetch('https://fapi.binance.com/futures/data/globalLongShortAccountRatio?symbol=ETHUSDT&period=1h&limit=1')
                ]);
                const ticker = await tickerRes.json();
                const funding = await fundingRes.json();
                const oi = await oiRes.json();
                const ls = await lsRes.json();

                marketData.eth.price = parseFloat(ticker.lastPrice);
                marketData.eth.change24h = parseFloat(ticker.priceChangePercent);
                marketData.eth.volume = parseFloat(ticker.quoteVolume);
                marketData.eth.high24h = parseFloat(ticker.highPrice);
                marketData.eth.low24h = parseFloat(ticker.lowPrice);
                marketData.eth.funding = funding[0] ? parseFloat(funding[0].fundingRate) * 100 : 0;
                marketData.eth.oi = parseFloat(oi.openInterest) * marketData.eth.price;
                marketData.eth.lsRatio = ls[0] ? parseFloat(ls[0].longShortRatio) : 1;

                updateEthUI();
                updateTimestamp('tsEth');
            } catch (e) { console.error('ETH fetch error:', e); }
        }

        async function fetchSolData() {
            try {
                const [tickerRes, fundingRes, oiRes, lsRes] = await Promise.all([
                    fetch('https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=SOLUSDT'),
                    fetch('https://fapi.binance.com/fapi/v1/fundingRate?symbol=SOLUSDT&limit=1'),
                    fetch('https://fapi.binance.com/fapi/v1/openInterest?symbol=SOLUSDT'),
                    fetch('https://fapi.binance.com/futures/data/globalLongShortAccountRatio?symbol=SOLUSDT&period=1h&limit=1')
                ]);
                const ticker = await tickerRes.json();
                const funding = await fundingRes.json();
                const oi = await oiRes.json();
                const ls = await lsRes.json();

                marketData.sol.price = parseFloat(ticker.lastPrice);
                marketData.sol.change24h = parseFloat(ticker.priceChangePercent);
                marketData.sol.volume = parseFloat(ticker.quoteVolume);
                marketData.sol.high24h = parseFloat(ticker.highPrice);
                marketData.sol.low24h = parseFloat(ticker.lowPrice);
                marketData.sol.funding = funding[0] ? parseFloat(funding[0].fundingRate) * 100 : 0;
                marketData.sol.oi = parseFloat(oi.openInterest) * marketData.sol.price;
                marketData.sol.lsRatio = ls[0] ? parseFloat(ls[0].longShortRatio) : 1;

                updateSolUI();
                updateTimestamp('tsSol');
            } catch (e) { console.error('SOL fetch error:', e); }
        }

        function updateBtcUI() {
            document.getElementById('btcPrice').textContent = formatPrice(marketData.btc.price);
            const changeEl = document.getElementById('btcChange24h');
            changeEl.textContent = formatPercent(marketData.btc.change24h);
            changeEl.className = 'metric-value ' + getChangeClass(marketData.btc.change24h);

            document.getElementById('btcChange7d').textContent = '~' + formatPercent(marketData.btc.change24h * 2.5);

            const domEl = document.getElementById('btcDominance');
            if (marketData.btc.change24h > marketData.eth.change24h && marketData.btc.change24h > marketData.sol.change24h) {
                domEl.textContent = 'Increasing';
                domEl.className = 'metric-value positive';
            } else {
                domEl.textContent = 'Decreasing';
                domEl.className = 'metric-value negative';
            }

            const fundEl = document.getElementById('btcFunding');
            fundEl.textContent = marketData.btc.funding.toFixed(4) + '%';
            fundEl.className = 'metric-value ' + (marketData.btc.funding > 0.05 ? 'positive' : marketData.btc.funding < -0.02 ? 'negative' : 'neutral');
        }

        function updateEthUI() {
            document.getElementById('ethPrice').textContent = formatPrice(marketData.eth.price);

            const changeEl = document.getElementById('ethChange24h');
            changeEl.textContent = formatPercent(marketData.eth.change24h);
            changeEl.className = 'metric-value ' + getChangeClass(marketData.eth.change24h);

            const vsBtcEl = document.getElementById('ethVsBtc');
            const ethVsBtc = marketData.eth.change24h - marketData.btc.change24h;
            vsBtcEl.textContent = formatPercent(ethVsBtc);
            vsBtcEl.className = 'metric-value ' + getChangeClass(ethVsBtc);

            const ethBtcRatio = marketData.eth.price / marketData.btc.price;
            document.getElementById('ethBtcRatio').textContent = ethBtcRatio.toFixed(5);

            const fundEl = document.getElementById('ethFunding');
            fundEl.textContent = marketData.eth.funding.toFixed(4) + '%';
            fundEl.className = 'metric-value ' + (marketData.eth.funding > 0.05 ? 'positive' : marketData.eth.funding < -0.02 ? 'negative' : 'neutral');

            // Deep dive
            document.getElementById('ethVolume').textContent = formatLargeNumber(marketData.eth.volume);
            document.getElementById('ethOI').textContent = formatLargeNumber(marketData.eth.oi);
            const ethLSEl = document.getElementById('ethLSRatio');
            ethLSEl.textContent = marketData.eth.lsRatio.toFixed(2);
            ethLSEl.className = 'metric-value ' + (marketData.eth.lsRatio > 1.1 ? 'positive' : marketData.eth.lsRatio < 0.9 ? 'negative' : 'neutral');

            const ethVol = ((marketData.eth.high24h - marketData.eth.low24h) / marketData.eth.price * 100);
            const btcVol = ((marketData.btc.high24h - marketData.btc.low24h) / marketData.btc.price * 100);
            const volRatio = ethVol / Math.max(btcVol, 0.1);
            const volEl = document.getElementById('ethVolatility');
            volEl.textContent = volRatio.toFixed(2) + 'x BTC';
            volEl.className = 'metric-value ' + (volRatio > 1.3 ? 'negative' : volRatio < 0.8 ? 'positive' : 'neutral');

            const ethMom = (marketData.eth.change24h > 0 ? 1 : -1) * Math.min(Math.abs(marketData.eth.change24h) / 5 * 100, 100);
            const momEl = document.getElementById('ethMomentum');
            momEl.textContent = ethMom.toFixed(0) + '/100';
            momEl.className = 'metric-value ' + (ethMom > 30 ? 'positive' : ethMom < -30 ? 'negative' : 'neutral');

            // Ratio card
            document.getElementById('ethBtcRatioLarge').textContent = ethBtcRatio.toFixed(5);
            const ethBtcChangeEl = document.getElementById('ethBtcRatioChange');
            if (ethVsBtc > 1) {
                ethBtcChangeEl.innerHTML = '<span class="positive">ETH Outperforming (' + formatPercent(ethVsBtc) + ')</span>';
            } else if (ethVsBtc < -1) {
                ethBtcChangeEl.innerHTML = '<span class="negative">ETH Underperforming (' + formatPercent(ethVsBtc) + ')</span>';
            } else {
                ethBtcChangeEl.innerHTML = '<span class="neutral">Tracking BTC (' + formatPercent(ethVsBtc) + ')</span>';
            }

            const ethSigEl = document.getElementById('ethBtcSignal');
            if (ethVsBtc > 2 && marketData.eth.funding < 0.08) {
                ethSigEl.textContent = 'ACCUMULATE ETH';
                ethSigEl.className = 'ratio-signal positive';
            } else if (ethVsBtc < -2) {
                ethSigEl.textContent = 'FAVOR BTC';
                ethSigEl.className = 'ratio-signal negative';
            } else {
                ethSigEl.textContent = 'NEUTRAL';
                ethSigEl.className = 'ratio-signal neutral';
            }
        }

        function updateSolUI() {
            document.getElementById('solPrice').textContent = formatPrice(marketData.sol.price);

            const changeEl = document.getElementById('solChange24h');
            changeEl.textContent = formatPercent(marketData.sol.change24h);
            changeEl.className = 'metric-value ' + getChangeClass(marketData.sol.change24h);

            const vsBtcEl = document.getElementById('solVsBtc');
            const solVsBtc = marketData.sol.change24h - marketData.btc.change24h;
            vsBtcEl.textContent = formatPercent(solVsBtc);
            vsBtcEl.className = 'metric-value ' + getChangeClass(solVsBtc);

            const solBtcRatio = marketData.sol.price / marketData.btc.price;
            document.getElementById('solBtcRatio').textContent = solBtcRatio.toFixed(6);

            const fundEl = document.getElementById('solFunding');
            fundEl.textContent = marketData.sol.funding.toFixed(4) + '%';
            fundEl.className = 'metric-value ' + (marketData.sol.funding > 0.05 ? 'positive' : marketData.sol.funding < -0.02 ? 'negative' : 'neutral');

            // Deep dive
            document.getElementById('solVolume').textContent = formatLargeNumber(marketData.sol.volume);
            document.getElementById('solOI').textContent = formatLargeNumber(marketData.sol.oi);
            const solLSEl = document.getElementById('solLSRatio');
            solLSEl.textContent = marketData.sol.lsRatio.toFixed(2);
            solLSEl.className = 'metric-value ' + (marketData.sol.lsRatio > 1.1 ? 'positive' : marketData.sol.lsRatio < 0.9 ? 'negative' : 'neutral');

            const solVol = ((marketData.sol.high24h - marketData.sol.low24h) / marketData.sol.price * 100);
            const btcVol = ((marketData.btc.high24h - marketData.btc.low24h) / marketData.btc.price * 100);
            const volRatio = solVol / Math.max(btcVol, 0.1);
            const volEl = document.getElementById('solVolatility');
            volEl.textContent = volRatio.toFixed(2) + 'x BTC';
            volEl.className = 'metric-value ' + (volRatio > 1.5 ? 'negative' : volRatio < 1 ? 'positive' : 'neutral');

            const solMom = (marketData.sol.change24h > 0 ? 1 : -1) * Math.min(Math.abs(marketData.sol.change24h) / 7 * 100, 100);
            const momEl = document.getElementById('solMomentum');
            momEl.textContent = solMom.toFixed(0) + '/100';
            momEl.className = 'metric-value ' + (solMom > 30 ? 'positive' : solMom < -30 ? 'negative' : 'neutral');

            // Ratio card
            document.getElementById('solBtcRatioLarge').textContent = solBtcRatio.toFixed(6);
            const solBtcChangeEl = document.getElementById('solBtcRatioChange');
            if (solVsBtc > 1) {
                solBtcChangeEl.innerHTML = '<span class="positive">SOL Outperforming (' + formatPercent(solVsBtc) + ')</span>';
            } else if (solVsBtc < -1) {
                solBtcChangeEl.innerHTML = '<span class="negative">SOL Underperforming (' + formatPercent(solVsBtc) + ')</span>';
            } else {
                solBtcChangeEl.innerHTML = '<span class="neutral">Tracking BTC (' + formatPercent(solVsBtc) + ')</span>';
            }

            const solSigEl = document.getElementById('solBtcSignal');
            if (solVsBtc > 3 && marketData.sol.funding < 0.1) {
                solSigEl.textContent = 'ACCUMULATE SOL';
                solSigEl.className = 'ratio-signal positive';
            } else if (solVsBtc < -3) {
                solSigEl.textContent = 'FAVOR BTC';
                solSigEl.className = 'ratio-signal negative';
            } else {
                solSigEl.textContent = 'NEUTRAL';
                solSigEl.className = 'ratio-signal neutral';
            }
        }

        function updateAnalysis() {
            const ethVsBtc = marketData.eth.change24h - marketData.btc.change24h;
            const solVsBtc = marketData.sol.change24h - marketData.btc.change24h;
            const altAvg = (marketData.eth.change24h + marketData.sol.change24h) / 2;

            // Outperform banner
            const banner = document.getElementById('outperformBanner');
            const icon = document.getElementById('outperformIcon');
            const title = document.getElementById('outperformTitle');
            const desc = document.getElementById('outperformDescription');
            const value = document.getElementById('outperformValue');

            banner.classList.remove('eth-leading', 'sol-leading', 'btc-leading');

            if (solVsBtc > 2 && solVsBtc > ethVsBtc) {
                banner.classList.add('sol-leading');
                icon.textContent = 'ðŸš€';
                title.textContent = 'SOL Leading - High Beta Outperformance';
                desc.textContent = `Solana outperforming BTC by ${formatPercent(solVsBtc)}. Risk appetite elevated, high-beta alts favored.`;
                value.textContent = 'SOL';
                value.className = 'outperform-meter-value sol-color';
            } else if (ethVsBtc > 1.5) {
                banner.classList.add('eth-leading');
                icon.textContent = 'â¬†';
                title.textContent = 'ETH Leading - Alt Season Signal';
                desc.textContent = `Ethereum outperforming BTC by ${formatPercent(ethVsBtc)}. Capital rotating to alts.`;
                value.textContent = 'ETH';
                value.className = 'outperform-meter-value eth-color';
            } else if (ethVsBtc < -1.5 && solVsBtc < -1.5) {
                banner.classList.add('btc-leading');
                icon.textContent = 'ðŸ›¡ï¸';
                title.textContent = 'BTC Dominance - Risk-Off in Crypto';
                desc.textContent = `Alts underperforming: ETH ${formatPercent(ethVsBtc)}, SOL ${formatPercent(solVsBtc)}. Rotate to BTC.`;
                value.textContent = 'BTC';
                value.className = 'outperform-meter-value btc-color';
            } else {
                banner.classList.add('btc-leading');
                icon.textContent = 'âŸ·';
                title.textContent = 'No Clear Leader - Mixed Signals';
                desc.textContent = 'Market moving together. No significant rotation detected.';
                value.textContent = 'â€”';
                value.className = 'outperform-meter-value';
            }

            // Rotation signals
            const altSeasonEl = document.getElementById('altSeasonIndex');
            const altSeasonScore = Math.min(100, Math.max(0, 50 + (altAvg - marketData.btc.change24h) * 10));
            altSeasonEl.textContent = altSeasonScore.toFixed(0) + '/100';
            altSeasonEl.className = 'metric-value ' + (altSeasonScore > 60 ? 'positive' : altSeasonScore < 40 ? 'negative' : 'neutral');

            const btcDomEl = document.getElementById('btcDomValue');
            btcDomEl.textContent = altAvg < marketData.btc.change24h ? 'Rising' : 'Falling';
            btcDomEl.className = 'metric-value ' + (altAvg < marketData.btc.change24h ? 'negative' : 'positive');

            const riskEl = document.getElementById('riskAppetite');
            if (marketData.sol.change24h > 3) {
                riskEl.textContent = 'High';
                riskEl.className = 'metric-value positive';
            } else if (marketData.btc.change24h < -2) {
                riskEl.textContent = 'Low';
                riskEl.className = 'metric-value negative';
            } else {
                riskEl.textContent = 'Moderate';
                riskEl.className = 'metric-value neutral';
            }

            const rotEl = document.getElementById('rotationPhase');
            if (altSeasonScore > 65) {
                rotEl.textContent = 'Alt Season';
                rotEl.className = 'metric-value positive';
            } else if (altSeasonScore < 35) {
                rotEl.textContent = 'BTC Season';
                rotEl.className = 'metric-value negative';
            } else {
                rotEl.textContent = 'Transition';
                rotEl.className = 'metric-value neutral';
            }

            const focusEl = document.getElementById('recommendedFocus');
            if (solVsBtc > 3) {
                focusEl.textContent = 'High Beta (SOL)';
                focusEl.className = 'metric-value sol-color';
            } else if (ethVsBtc > 1.5) {
                focusEl.textContent = 'Large Cap Alts (ETH)';
                focusEl.className = 'metric-value eth-color';
            } else {
                focusEl.textContent = 'Bitcoin (BTC)';
                focusEl.className = 'metric-value btc-color';
            }

            updateSignals();
            updateSummary();
        }

        function updateSignals() {
            const ethVsBtc = marketData.eth.change24h - marketData.btc.change24h;
            const solVsBtc = marketData.sol.change24h - marketData.btc.change24h;

            const bullish = [];
            const bearish = [];

            if (ethVsBtc > 1) bullish.push('ETH outperforming BTC by ' + formatPercent(ethVsBtc));
            if (solVsBtc > 2) bullish.push('SOL showing relative strength (' + formatPercent(solVsBtc) + ')');
            if (marketData.eth.funding < 0.03 && marketData.eth.change24h > 0) bullish.push('ETH funding healthy - room to run');
            if (marketData.sol.funding < 0.05 && marketData.sol.change24h > 0) bullish.push('SOL funding not overheated');
            if (marketData.eth.lsRatio > 1.2) bullish.push('ETH longs confident');
            if (marketData.sol.lsRatio > 1.3) bullish.push('SOL sentiment bullish');

            if (ethVsBtc < -1) bearish.push('ETH underperforming BTC by ' + formatPercent(ethVsBtc));
            if (solVsBtc < -2) bearish.push('SOL lagging significantly (' + formatPercent(solVsBtc) + ')');
            if (marketData.eth.funding > 0.08) bearish.push('ETH funding overheated - pullback risk');
            if (marketData.sol.funding > 0.1) bearish.push('SOL funding extreme - caution');
            if (marketData.btc.change24h > 2 && ethVsBtc < 0) bearish.push('BTC dominance increasing');
            if (marketData.eth.lsRatio < 0.8) bearish.push('ETH shorts building');

            if (bullish.length === 0) bullish.push('No strong alt bullish signals');
            if (bearish.length === 0) bearish.push('No strong BTC dominance signals');

            document.getElementById('bullishSignals').innerHTML = bullish.map(s => `<li>${s}</li>`).join('');
            document.getElementById('bearishSignals').innerHTML = bearish.map(s => `<li>${s}</li>`).join('');
        }

        function updateSummary() {
            const ethVsBtc = marketData.eth.change24h - marketData.btc.change24h;
            const solVsBtc = marketData.sol.change24h - marketData.btc.change24h;

            const verdictEl = document.getElementById('summaryVerdict');
            const detailEl = document.getElementById('summaryDetail');

            if (solVsBtc > 3 && ethVsBtc > 1) {
                verdictEl.textContent = 'ALT SEASON: High Beta Favored';
                verdictEl.className = 'summary-verdict positive';
                detailEl.textContent = 'Both ETH and SOL outperforming BTC significantly. Risk appetite high. Consider overweight in alts, especially SOL for momentum plays.';
            } else if (ethVsBtc > 2) {
                verdictEl.textContent = 'ETH ROTATION: Large Cap Alts';
                verdictEl.className = 'summary-verdict positive';
                detailEl.textContent = 'ETH leading the market. Typical mid-cycle behavior. Focus on ETH and established alts. SOL may follow.';
            } else if (ethVsBtc < -2 && solVsBtc < -2) {
                verdictEl.textContent = 'BTC DOMINANCE: Reduce Alt Exposure';
                verdictEl.className = 'summary-verdict negative';
                detailEl.textContent = 'Alts significantly underperforming. Risk-off within crypto. Rotate to BTC or stables. Wait for ratio bottoms.';
            } else {
                verdictEl.textContent = 'NEUTRAL: No Clear Rotation';
                verdictEl.className = 'summary-verdict neutral';
                detailEl.textContent = 'Market moving together without clear alt outperformance. Maintain balanced positions. Watch for breakout in ratios.';
            }

            // Outlooks
            const ethOutEl = document.getElementById('ethOutlook');
            ethOutEl.textContent = ethVsBtc > 1 ? 'Bullish' : ethVsBtc < -1 ? 'Bearish' : 'Neutral';
            ethOutEl.className = 'summary-value ' + (ethVsBtc > 1 ? 'positive' : ethVsBtc < -1 ? 'negative' : 'neutral');

            const solOutEl = document.getElementById('solOutlook');
            solOutEl.textContent = solVsBtc > 2 ? 'Bullish' : solVsBtc < -2 ? 'Bearish' : 'Neutral';
            solOutEl.className = 'summary-value ' + (solVsBtc > 2 ? 'positive' : solVsBtc < -2 ? 'negative' : 'neutral');

            const bestEl = document.getElementById('bestPlay');
            if (solVsBtc > ethVsBtc && solVsBtc > 0) {
                bestEl.textContent = 'Long SOL';
                bestEl.className = 'summary-value sol-color';
            } else if (ethVsBtc > 0) {
                bestEl.textContent = 'Long ETH';
                bestEl.className = 'summary-value eth-color';
            } else {
                bestEl.textContent = 'Long BTC';
                bestEl.className = 'summary-value btc-color';
            }

            const convEl = document.getElementById('conviction');
            const spread = Math.abs(ethVsBtc) + Math.abs(solVsBtc);
            convEl.textContent = spread > 6 ? 'High' : spread > 3 ? 'Medium' : 'Low';
            convEl.className = 'summary-value ' + (spread > 6 ? 'positive' : spread > 3 ? 'neutral' : 'negative');
        }

        function initChart() {
            const container = document.getElementById('tradingview_chart');
            if (!container) return;
            container.innerHTML = '';

            const isDark = currentTheme === 'night';

            new TradingView.widget({
                "autosize": true,
                "symbol": "BINANCE:ETHBTC",
                "interval": "240",
                "timezone": "Etc/UTC",
                "theme": isDark ? "dark" : "light",
                "style": "1",
                "locale": "en",
                "toolbar_bg": isDark ? "#0a0a0a" : "#fafafa",
                "enable_publishing": false,
                "hide_side_toolbar": false,
                "allow_symbol_change": true,
                "container_id": "tradingview_chart",
                "compare_symbol": [{"symbol": "BINANCE:SOLBTC", "position": "SameScale"}],
                "hide_top_toolbar": false,
                "save_image": false,
                "backgroundColor": isDark ? "#0a0a0a" : "#ffffff",
                "gridColor": isDark ? "#1a1a1a" : "#e5e5e5"
            });
        }

        async function fetchAllData() {
            await Promise.all([fetchBtcData(), fetchEthData(), fetchSolData()]);
            updateAnalysis();

            document.getElementById('lastUpdate').textContent =
                'Last update: ' + new Date().toISOString().replace('T', ' ').substring(0, 19) + ' UTC â€¢ Auto-refresh: 30s';
        }

        window.addEventListener('DOMContentLoaded', () => {
            const button = document.querySelector('.theme-toggle');
            if (currentTheme === 'day') {
                document.documentElement.setAttribute('data-theme', 'day');
                button.textContent = 'Night Mode';
            }
            fetchAllData();
            initChart();
            setInterval(fetchAllData, 30000);
        });
    </script>
</body>
</html>
